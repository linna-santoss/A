<!DOCTYPE html>
<html lang="pt-br">
 
<head> 

  <!-- Botstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
  <meta charset="UTF-8">
  <title>Alert Aqui</title>
  <link rel="stylesheet" type="text/css" href="style.css" media="screen">
  <!-- Botstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
  <style>
  </style>

</head>

<!-- Botstrap JS -->
<body onload="carregarPag()">

  <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script>






  <!-- <ul id="top" class="">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
  </ul> -->
  <div class="container-fluid menutop">
    <div class="row">
      <div class="col-3">
        <img src="imagens/logo.png">
      </div>
      <div class="col-2">
        <a href="#C1" class="menu-texto"> Local de Alerta </a>
      </div>
      <div class="col-2">
        <a href="#C2" class="menu-texto" > Quem Somos? </a>
      </div>
      <div class="col-2">
        <a href="#C3" class="menu-texto"> Como Funciona? </a>
      </div>
      <div class="col-3">
        <a href="#C4" class="menu-texto"> Denuncia Contra Violência Doméstica </a>
      </div>
    </div>
  </div>

  <div class="container-fluid menuImagens">
    <div class="row">
      <div class="col-12">
        <img src="imagens/banner.png">
      </div>
      
      <div class="col-3"></div>
      <div class="col-2 texto-imagens">
        <a href="alerta.html">
          <img src="imagens/Alerta.png">
          <p>
            Alerta
          </p>
        </a>
      </div>
      <div class="col-2 texto-imagens">
       <a href="assalto.html">
        <img src="imagens/Assalto.png">
        <p>
          Assalto
        </p>
      </a>
      </div>
      <div class="col-2 texto-imagens">
        <a href="energia.html">
        <img src="imagens/Energia.png">
        <p>
          Energia
        </p>
      </a>
      </div>
      <div class="col-3"></div>
    </div>
  </div>

  <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initMap&libraries=&v=weekly"
    async
  ></script>
  <div id="map"></div>

  <div style="max-width: 1000px; margin: 0 auto; padding-top:300px; padding-bottom:200px" > 

    <div style="color:white; font-size: 29px;">Fazer Login</div>
    <br>

    <form action="teste.html">
      <div class="mb-3">
        <label for="InputEmail1" class="form-label" style="color:white">Endereço de email</label>
        <input type="email" class="form-control" id="InputEmail1" aria-describedby="emailHelp">
      </div>
      <div class="mb-3">
        <label for="InputPassword1" class="form-label" style="color:white">Senha</label>
        <input type="password" minlength="8" class="form-control" id="InputPassword1">
      </div>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="Check1">
        <label class="form-check-label" for="Check1" style="color:white">Lembrar de mim</label>
      </div>
      <button href="teste.html" type="submit" class="btn btn-primary">Submit</button>
    </form>
  </div>

</body>


  <script>

    var firebaseConfig = {
      apiKey: "AIzaSyCr0YcZGPQxfmglY8tViVsqK7tcVV0GkW4",
      authDomain: "fir-teste-d6609.firebaseapp.com",
      databaseURL: "https://fir-teste-d6609-default-rtdb.firebaseio.com",
      projectId: "fir-teste-d6609",
      storageBucket: "fir-teste-d6609.appspot.com",
      messagingSenderId: "446739754291",
      appId: "1:446739754291:web:487f97f408a90abe16e246"
    };

    firebase.initializeApp(firebaseConfig);

    var lat = "";
    var lng = "";
    var map, geocoder, infowindow;
    var end_rua, end_numero, end_bairro, end_cidade, end_estado, end_cep, end_pais;
    
    //Executar a função na hora em que a página é carregada
    function carregarPag() {
      if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else { 
          alert("Geolocation não é suportado neste navegador.");
        }
    }

    //----------------------------------------------------
    
    function showPosition(position) {
      var crd = position.coords;
      lat = crd.latitude;
      lng = crd.longitude;
      geocodeLatLng();
    }
    
    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 12,
        center: {
          lat: -23.1791,
          lng: -45.8872
        },
      });

      geocoder = new google.maps.Geocoder();
      infowindow = new google.maps.InfoWindow();
    }
      
    function geocodeLatLng() {
      const latlng = {
        lat: parseFloat(lat),
        lng: parseFloat(lng),
      };

      geocoder.geocode({
        location: latlng
      }, (results, status) => {
        if (status === "OK") {
          if (results[0]) {
            map.setZoom(18);
            const marker = new google.maps.Marker({
              position: latlng,
              map: map,
            });
            infowindow.setContent(results[0].formatted_address);
            infowindow.open(map, marker);
            var endereco = ("" + results[0].formatted_address).split(",");
            registrarEndereco(endereco);
          } else {
            window.alert("Não foram encontrados resultados.");
          }
        } else {
          window.alert("Geocoder falhou: " + status);
        }
      });
    }

    function registrarEndereco(endereco){
      end_rua = endereco[0];
      end_numero = endereco[1].substr(0, endereco[1].indexOf("-"));
      end_bairro = endereco[1].substr(endereco[1].indexOf("-") + 1);
      end_cidade = endereco[2].substr(0, endereco[2].indexOf("-"));
      end_estado = endereco[2].substr(endereco[2].indexOf("-") + 1);
      end_cep = endereco[3];
      end_pais = endereco[4];
      var refLocalizacao = firebase.database().ref("localização");
      var resultado = refLocalizacao.push({

        endereco_rua : end_rua,
        endereco_numero : end_numero,
        endereco_bairro : end_bairro,
        endereco_cidade : end_cidade,
        endereco_estado : end_estado,
        endereco_cep : end_cep,
        endereco_pais : end_pais

    }) 

    }

  </script>