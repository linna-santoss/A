<!DOCTYPE html>
<html lang="pt-br">
  <!-- Botstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
<head> 
<meta charset="UTF-8">
<title>Alert Aqui</title>
<style>

  
body{
  background-image: url("back.jpg");
  background-repeat: no-repeat;
  background-attachment: scroll;
  background-size: cover;
  background-color: rgb(6,8,66);;
}
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}
#top {
  height: 60px;
  list-style-type: none;
  margin: 1;
  padding-left: 0;
  overflow: hidden;
  background-color:rgb(110, 164, 202);
}

li {
  float: left;
}

#TextoCentral{
  padding-top:100px;
  padding-bottom:200px;
  color:white;
  text-align:center;
}

#ImagensAlerta{

  padding-top:100px;
  align-content:center

}

#TextoAlerta{

  text-align: center;
  font-size:20px;

}

li a {
  display: block;
  color: white;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

li a:hover {
  background-color:rgb(57, 114, 155);
}

#map {
  height: 90%;
  width: 90%;
  margin: auto;
}
</style>
</head>
<!-- Botstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
<body onload="carregarPag()">

  <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script>

  <ul id="top" class="menutop">
      <li><img src="logo.png" width=154 height=65></li>
      <li><a href="#C1"> Local de Alerta </a></li>
      <li><a href="#C2"> Quem Somos? </a></li>
      <li><a href="#C3"> Como Funciona? </a></li>
      <li><a href="#C4"> Denuncia Contra Violência Doméstica </a></li>
  </ul>
    
  <ul id="TextoCentral">
    <b style="padding-right:500px; font-size: 35px">VENHA FAZER PARTE!</b>
    <br>
    <br>
    <b style="padding-right:100px; font-size: 30px">JUNTOS,</b>
    <br>
    <b style="padding-left:300px; font-size: 30px;">TORNAMOS O SEU </b><b style="color:rgba(30,171,199,255); font-size: 33px;">DIA A DIA</b>
    <br>
    <b style="font-size: 30px;">MAIS </b> <b style="padding-right:200px; color:rgba(30,171,199,255); font-size: 33px">SEGURO</b>
    <br>
    <ul id="ImagensAlerta" style="align-content:center">
      <a href="alerta"><img src="Alerta.png" style="padding-right:400px"></a>
      <a href="assalto"><img src="Assalto.png"></a>
      <a href="energia"><img src="Energia.png" style="padding-left:400px"></ul></a>
    <br>
    <ul id="TextoAlerta"><b style="padding-right:420px">Alerta</b> <b>Assalto</b> <b style="padding-left:420px">Energia</b></ul>
  </ul>

  <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initMap&libraries=&v=weekly"
    async
  ></script>
  <div id="map"></div>

  <div style="max-width: 1000px; margin: 0 auto; padding-top:300px; padding-bottom:200px" > 

    <div style="color:white; font-size: 29px;">Fazer Login</div>
    <br>

    <form action="teste.html">
      <div class="mb-3">
        <label for="InputEmail1" class="form-label" style="color:white">Endereço de email</label>
        <input type="email" class="form-control" id="InputEmail1" aria-describedby="emailHelp">
      </div>
      <div class="mb-3">
        <label for="InputPassword1" class="form-label" style="color:white">Senha</label>
        <input type="password" minlength="8" class="form-control" id="InputPassword1">
      </div>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="Check1">
        <label class="form-check-label" for="Check1" style="color:white">Lembrar de mim</label>
      </div>
      <button href="teste.html" type="submit" class="btn btn-primary">Submit</button>
    </form>
  </div>

</body>


  <script>

    var firebaseConfig = {
      apiKey: "AIzaSyCr0YcZGPQxfmglY8tViVsqK7tcVV0GkW4",
      authDomain: "fir-teste-d6609.firebaseapp.com",
      databaseURL: "https://fir-teste-d6609-default-rtdb.firebaseio.com",
      projectId: "fir-teste-d6609",
      storageBucket: "fir-teste-d6609.appspot.com",
      messagingSenderId: "446739754291",
      appId: "1:446739754291:web:487f97f408a90abe16e246"
    };

    firebase.initializeApp(firebaseConfig);

    var lat = "";
    var lng = "";
    var map, geocoder, infowindow;
    var end_rua, end_numero, end_bairro, end_cidade, end_estado, end_cep, end_pais;
    
    //Executar a função na hora em que a página é carregada
    function carregarPag() {
      if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else { 
          alert("Geolocation não é suportado neste navegador.");
        }
    }

    //----------------------------------------------------
    
    function showPosition(position) {
      var crd = position.coords;
      lat = crd.latitude;
      lng = crd.longitude;
      geocodeLatLng();
    }
    
    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 12,
        center: {
          lat: -23.1791,
          lng: -45.8872
        },
      });

      geocoder = new google.maps.Geocoder();
      infowindow = new google.maps.InfoWindow();
    }
      
    function geocodeLatLng() {
      const latlng = {
        lat: parseFloat(lat),
        lng: parseFloat(lng),
      };

      geocoder.geocode({
        location: latlng
      }, (results, status) => {
        if (status === "OK") {
          if (results[0]) {
            map.setZoom(18);
            const marker = new google.maps.Marker({
              position: latlng,
              map: map,
            });
            infowindow.setContent(results[0].formatted_address);
            infowindow.open(map, marker);
            var endereco = ("" + results[0].formatted_address).split(",");
            registrarEndereco(endereco);
          } else {
            window.alert("Não foram encontrados resultados.");
          }
        } else {
          window.alert("Geocoder falhou: " + status);
        }
      });
    }

    function registrarEndereco(endereco){
      end_rua = endereco[0];
      end_numero = endereco[1].substr(0, endereco[1].indexOf("-"));
      end_bairro = endereco[1].substr(endereco[1].indexOf("-") + 1);
      end_cidade = endereco[2].substr(0, endereco[2].indexOf("-"));
      end_estado = endereco[2].substr(endereco[2].indexOf("-") + 1);
      end_cep = endereco[3];
      end_pais = endereco[4];
      var refLocalizacao = firebase.database().ref("localização");
      var resultado = refLocalizacao.push({

        endereco_rua : end_rua,
        endereco_numero : end_numero,
        endereco_bairro : end_bairro,
        endereco_cidade : end_cidade,
        endereco_estado : end_estado,
        endereco_cep : end_cep,
        endereco_pais : end_pais

    }) 

    }

  </script>